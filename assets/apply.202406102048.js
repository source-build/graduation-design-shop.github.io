import{A as k}from"./index.20240610204824.js";import{_ as q,s as A,c as u,e as s,f as c,g as y,t as x,k as p,h as r,w as l,j as a,F as I,i as w,l as m}from"./index.202406102048.js";import{s as P}from"./function-call.202406102048.js";const B={data(){return{type:0,typeItems:[{name:"我要退款(无需退货)",value:0},{name:"我要退货退款",value:1},{name:"我要换货",value:2}],logisticsStatus:0,logisticsStatusItems:[{name:"未收到货",value:0},{name:"已收到货",value:1}],reason:"",reasonItems:["不喜欢/不想要","空包裹","未按约定时间发货","快递/物流一直未送达","货物破损已拒签","退运费","规格尺寸与商品页面描述不符","功能/效果不符","质量问题","少件/漏发","包装/商品破损","发票问题"],showPicker:!1,amount:"",remark:"",refundApplyInfo:{}}},watch:{type(n){n>0&&(this.logisticsStatus=1)},logisticsStatus(n){n>0&&(this.type=0)}},created(){this.amount=this.$route.query.amount,this.getRefundApplyInfo()},methods:{getRefundApplyInfo(){const n={orderId:this.$route.query.orderId,orderGoodsId:this.$route.query.orderGoodsId};k.orderRefundApplyInfo(n).then(o=>{if(o.data){this.refundApplyInfo=o.data[0];const d=o.data[0].baseInfo;this.amount=d.amount,this.logisticsStatus=d.logisticsStatus,this.type=d.type,this.reason=d.reason,this.remark=d.remark}})},onChangeType(n){this.type=n},onConfirm(n){this.reason=n,this.showPicker=!1},onRefundApplyCancel(){const n={orderId:this.$route.query.orderId,orderGoodsId:this.$route.query.orderGoodsId};k.orderRefundApplyCancel(n).then(o=>{A("撤销申请成功"),this.$router.back()})},onRefundApplySubmit(){if(!this.reason){A("请选择退换货原因");return}const n={orderId:this.$route.query.orderId,orderGoodsId:this.$route.query.orderGoodsId,amount:this.typ===2?0:this.amount,type:this.type,logisticsStatus:this.logisticsStatus,reason:this.reason,remark:this.remark};k.orderRefundApplyApply(n).then(o=>{P({title:"提示",message:"提交成功，请耐心等待我们处理！",showCancelButton:!1,confirmButtonText:"我知道了"}).then(()=>{this.$router.back()}).catch(()=>{})})}}},G={class:"container"},T={key:0,class:"header"},U={class:"header-title"},z={class:"main"},N={class:"affix-bar"},D={class:"affix-bar__bar"};function E(n,o,d,F,e,i){const v=u("van-radio"),b=u("van-cell"),g=u("van-cell-group"),C=u("van-radio-group"),_=u("van-field"),f=u("van-button"),S=u("van-picker"),V=u("van-popup");return s(),c("div",G,[e.refundApplyInfo.baseInfo?(s(),c("div",T,[y("div",U,x(e.refundApplyInfo.baseInfo.statusStr),1)])):p("",!0),y("div",z,[r(C,{modelValue:e.type,"onUpdate:modelValue":o[0]||(o[0]=t=>e.type=t)},{default:l(()=>[r(g,{title:"选择服务类型"},{default:l(()=>[(s(!0),c(I,null,w(e.typeItems,(t,h)=>(s(),a(b,{key:h,title:t.name,onClick:R=>i.onChangeType(t.value)},{default:l(()=>[r(v,{name:t.value},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),r(C,{modelValue:e.logisticsStatus,"onUpdate:modelValue":o[1]||(o[1]=t=>e.logisticsStatus=t),class:"mb20"},{default:l(()=>[r(g,{title:"选择货物状态"},{default:l(()=>[(s(!0),c(I,null,w(e.logisticsStatusItems,(t,h)=>(s(),a(b,{key:h,title:t.name,onClick:R=>i.onChangeType(t.value)},{default:l(()=>[r(v,{name:t.value},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),r(_,{readonly:"",clickable:"",label:"售后原因","model-value":e.reason,placeholder:"退换货原因",onClick:o[2]||(o[2]=t=>e.showPicker=!0)},null,8,["model-value"]),e.type!==2?(s(),a(_,{key:0,modelValue:e.amount,"onUpdate:modelValue":o[3]||(o[3]=t=>e.amount=t),type:"number",label:"退款金额"},null,8,["modelValue"])):p("",!0),r(_,{modelValue:e.remark,"onUpdate:modelValue":o[4]||(o[4]=t=>e.remark=t),label:"售后说明",type:"textarea",placeholder:"请输入退款说明",rows:"1",autosize:""},null,8,["modelValue"]),y("div",N,[y("div",D,[e.refundApplyInfo.baseInfo?(s(),c(I,{key:0},[e.refundApplyInfo.baseInfo.status===0?(s(),a(f,{key:0,block:"",type:"primary",onClick:i.onRefundApplyCancel},{default:l(()=>[m(" 撤回本次申请 ")]),_:1},8,["onClick"])):p("",!0),e.refundApplyInfo.baseInfo.status===1?(s(),a(f,{key:1,block:"",type:"primary",onClick:i.onRefundApplySubmit},{default:l(()=>[m(" 申请售后 ")]),_:1},8,["onClick"])):p("",!0),e.refundApplyInfo.baseInfo.status===2?(s(),a(f,{key:2,square:"",size:"large",type:"primary",onClick:i.onRefundApplySubmit},{default:l(()=>[m(" 再次申请，或联系客服 ")]),_:1},8,["onClick"])):p("",!0),e.refundApplyInfo.baseInfo.status===3?(s(),a(f,{key:3,square:"",size:"large",type:"info",disabled:""},{default:l(()=>[m(" 等待处理 ")]),_:1})):p("",!0),e.refundApplyInfo.baseInfo.status===4?(s(),a(f,{key:4,square:"",size:"large",type:"primary",disabled:""},{default:l(()=>[m(" 处理完毕 ")]),_:1})):p("",!0)],64)):(s(),a(f,{key:1,square:"",block:"",type:"primary",onClick:i.onRefundApplySubmit},{default:l(()=>[m("立即申请售后")]),_:1},8,["onClick"]))])]),r(V,{show:e.showPicker,"onUpdate:show":o[6]||(o[6]=t=>e.showPicker=t),position:"bottom"},{default:l(()=>[r(S,{"show-toolbar":"",columns:e.reasonItems,onCancel:o[5]||(o[5]=t=>e.showPicker=!1),onConfirm:i.onConfirm},null,8,["columns","onConfirm"])]),_:1},8,["show"])])])}const H=q(B,[["render",E],["__scopeId","data-v-063803f5"]]);export{H as default};
