import{_ as W}from"./index.20240610204818.js";import{_ as j,a as z}from"./index.20240610204825.js";import{y as Z,b as G,h as r,z as H,A as J,_ as B,e as u,f as _,p as K,m as N,g as t,d as Q,o as X,n as s,B as Y,a as h,q as A,C as tt,c as L,D as E,t as d,k as et,F as P,i as R}from"./index.202406102048.js";import{c as S}from"./format.202406102048.js";import{a as D}from"./index.20240610204826.js";import{A as ot}from"./index.20240610204827.js";import{A as st}from"./index.20240610204824.js";import{u as nt}from"./usePage.202406102048.js";import"./is.202406102048.js";let k;function at(){const p=Z({name:"AppClientInfoPopupWrapper",setup(){const g=G({show:!1}),a=b=>{g.show=b},C={open:()=>{a(!0)},close:()=>{a(!1)},toggle:a},f=J();return f&&Object.assign(f.proxy,C),()=>r(j,H(g,{"onUpdate:show":a}),null)}}),m=document.createElement("div");document.body.appendChild(m),k=p.mount(m)}function it(){return k||at(),k.open(),k}const ct={},lt=c=>(K("data-v-59bc2339"),c=c(),N(),c),dt={id:"svg",width:"100%",height:"100%",viewBox:"0 0 1440 400",xmlns:"http://www.w3.org/2000/svg",class:"transition duration-300 ease-in-out delay-150"},rt=lt(()=>t("path",{d:"M 0,400 C 0,400 0,200 0,200 C 71.55980861244021,216.3062200956938 143.11961722488041,232.61244019138758 251,222 C 358.8803827751196,211.38755980861242 503.08133971291863,173.8564593301435 622,171 C 740.9186602870814,168.1435406698565 834.555023923445,199.9617224880383 909,202 C 983.444976076555,204.0382775119617 1038.6985645933014,176.29665071770333 1124,171 C 1209.3014354066986,165.70334928229667 1324.6507177033493,182.85167464114835 1440,200 C 1440,200 1440,400 1440,400 Z",stroke:"none","stroke-width":"0",fill:"#ffffffff",class:"transition-all duration-300 ease-in-out delay-150 path-0"},null,-1)),ut=[rt];function _t(c,p){return u(),_("svg",dt,ut)}const pt=B(ct,[["render",_t],["__scopeId","data-v-59bc2339"]]),vt=""+new URL("png/icon_art.202406102048.png",import.meta.url).href,ht=""+new URL("png/icon_device.202406102048.png",import.meta.url).href,i=c=>(K("data-v-398215a0"),c=c(),N(),c),mt={class:"container"},gt={class:"header"},ft=i(()=>t("div",{class:"header-tag"},"个人资料",-1)),Ct={class:"header-info"},bt={class:"header-nick van-ellipsis mb10"},kt={class:"header-sub"},yt={class:"header-sub-item"},wt=i(()=>t("span",{class:"header-sub-item-separate"},"|",-1)),It={class:"header-sub-item"},xt=i(()=>t("span",{class:"header-sub-item-separate"},"|",-1)),St={key:0,class:"header-sub-item"},$t=i(()=>t("div",{class:"header-info"},[t("div",{class:"header-nick"},"登录/注册")],-1)),Ut={class:"header-bg"},At={class:"header-bg-wave"},Lt={class:"main"},Et=i(()=>t("div",{class:"group"},null,-1)),Pt={class:"group"},Rt={class:"count-list"},Dt={class:"count-list-item-value"},Bt=i(()=>t("div",{class:"count-list-item-label"},"积分",-1)),Kt={class:"count-list-item-value"},Nt=i(()=>t("div",{class:"count-list-item-label"},"优惠券",-1)),Mt={class:"count-list-item-value"},Ot=i(()=>t("div",{class:"count-list-item-label"},"余额",-1)),Tt={class:"group"},Vt=i(()=>t("div",{class:"group-header-hd"},"我的订单",-1)),qt={class:"group-header-bd"},Ft=i(()=>t("span",{class:"group-header-txt"},"查看全部订单",-1)),Wt={class:"order-list"},jt=["onClick"],zt={class:"order-list-item-title"},Zt={class:"group"},Gt=i(()=>t("div",{class:"group-header van-hairline--bottom"},[t("div",{class:"group-header-hd"},"常用功能")],-1)),Ht={class:"tool-list"},Jt=["onClick"],Qt={class:"tool-list-item-title"},Xt={name:"Mine"},Yt=Q({...Xt,setup(c){X(()=>{s(m)&&(p.getUserDetail(),T())});const p=Y(),{hasLogin:m,goLogin:g,goPage:a}=nt(),y=h(0),w=h(void 0),C=h(void 0),f=h(void 0),b=h([{value:"",label:"待付款",icon:"pending-payment",path:"/order/list?status=0",count:void 0,countKey:"count_id_no_pay"},{value:"",label:"待发货",icon:"tosend",path:"/order/list?status=1",count:void 0,countKey:"count_id_no_transfer"},{value:"",label:"待收货",icon:"logistics",path:"/order/list?status=2",count:void 0,countKey:"count_id_no_confirm"},{value:"",label:"评价",icon:"comment-o",path:"/order/list?status=3",count:void 0,countKey:"count_id_no_reputation"},{value:"",label:"退款/售后",icon:"after-sale",path:"/refund",count:void 0}]),M=h([{icon:"balance-o",title:"我的钱包",path:"/wallet"},{icon:"point-gift-o",title:"积分兑换",path:"/integral/exchange"},{icon:"coupon-o",title:"优惠券",path:"/coupon"},{icon:"location-o",title:"收货地址",path:"/address"},{icon:"setting-o",title:"设置",path:"/setting"},{icon:vt,title:"主题",path:"/theme"},{icon:ht,title:"我的设备",value:"device"}]);function O(n){if(n.path){a(n.path);return}n.value==="device"&&it()}const I=A(()=>p.getUserInfo),$=A(()=>p.getUserLevel);function U(){document.querySelector(".header-avatar").classList.toggle("active")}function T(){tt.userAmount().then(n=>{var e,l,v;w.value=((e=n.data)==null?void 0:e.balance)??0,y.value=((l=n.data)==null?void 0:l.growth)??0,C.value=((v=n.data)==null?void 0:v.score)??0}),st.orderStatistics().then(n=>{const e=n.data;b.value.forEach(l=>{e[l.countKey]&&(l.count=e[l.countKey])})}),ot.discountsStatistics().then(n=>{var e;f.value=((e=n.data)==null?void 0:e.canUse)??0})}return(n,e)=>{const l=L("van-image"),v=L("van-icon"),V=z,q=W;return u(),_("div",mt,[t("div",gt,[s(m)?(u(),_("div",{key:0,class:"header-inner",onClick:e[0]||(e[0]=o=>s(a)("/profile"))},[ft,r(l,{class:"header-avatar",src:I.value.avatarUrl||s(D).avatar,alt:"",onClick:E(U,["stop"])},null,8,["src"]),t("div",Ct,[t("div",bt,d(I.value.nick||"还没有昵称"),1),t("div",kt,[t("span",yt,"ID "+d(I.value.id),1),wt,t("span",It,"成长值 "+d(y.value),1),xt,$.value.id?(u(),_("span",St," 段位 "+d($.value.name),1)):et("",!0)])])])):(u(),_("div",{key:1,class:"header-inner",onClick:e[1]||(e[1]=(...o)=>s(g)&&s(g)(...o))},[r(l,{class:"header-avatar",src:s(D).avatar,alt:"",onClick:E(U,["stop"])},null,8,["src"]),$t])),t("div",Ut,[t("div",At,[r(pt)])])]),t("div",Lt,[Et,t("div",Pt,[t("div",Rt,[t("div",{class:"count-list-item",onClick:e[2]||(e[2]=o=>s(a)("/integral"))},[t("div",Dt,d(s(S)(C.value,0)),1),Bt]),t("div",{class:"count-list-item",onClick:e[3]||(e[3]=o=>s(a)("/coupon"))},[t("div",Kt,d(s(S)(f.value,0)),1),Nt]),t("div",{class:"count-list-item",onClick:e[4]||(e[4]=o=>s(a)("/wallet"))},[t("div",Mt,d(s(S)(w.value)),1),Ot])])]),t("div",Tt,[t("div",{class:"group-header van-hairline--bottom",onClick:e[5]||(e[5]=o=>s(a)("/order/list"))},[Vt,t("div",qt,[Ft,r(v,{class:"group-header-arrow",name:"arrow"})])]),t("div",Wt,[(u(!0),_(P,null,R(b.value,(o,x)=>(u(),_("div",{key:x,class:"order-list-item",onClick:F=>s(a)(o.path)},[r(v,{class:"order-list-item-icon",name:o.icon,badge:o.count},null,8,["name","badge"]),t("div",zt,d(o.label),1)],8,jt))),128))])]),t("div",Zt,[Gt,t("div",Ht,[(u(!0),_(P,null,R(M.value,(o,x)=>(u(),_("div",{key:x,class:"tool-list-item",onClick:F=>O(o)},[r(v,{class:"tool-list-item-icon",name:o.icon,badge:o.count},null,8,["name","badge"]),t("div",Qt,d(o.title),1)],8,Jt))),128))])])]),r(V),r(q)])}}});const de=B(Yt,[["__scopeId","data-v-398215a0"]]);export{de as default};
