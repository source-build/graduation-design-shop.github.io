import{d as x,a as s,a7 as h,a8 as y,a9 as T,h as n,a5 as v,aa as g,q as b,n as d,ab as m,ac as B}from"./index.202406102048.js";const M=x({name:"AppInfiniteScroller",props:{loading:Boolean,noMore:Boolean,offset:{type:Number,default:300}},emits:["loadMore","update:loading"],setup(e,{emit:r,slots:a}){const o=s(!1),u=s(),p=s(),c=h(u);return y("scroll",()=>{v(()=>{if(o.value||e.noMore)return;const t=g(c);if(!t.height)return;let l=!1;l=g(p).bottom-t.bottom<=e.offset,l&&(o.value=!0,r("update:loading",!0),r("loadMore"))})},{target:c,passive:!0}),T(()=>{o.value=e.loading}),()=>{var i;const t=(i=a.default)==null?void 0:i.call(a),l=n("div",{ref:p,class:"app-infinite__placeholder"},null);return n("div",{ref:u,class:"app-infinite"},[t,l])}}});const E={loadingText:"加载中...",errorText:"请求失败，点击重新加载",emptyText:"暂无数据",emptyImage:"default",loadingMoreText:"加载中...",noMoreText:"没有更多了"},C=x({name:"AppList",components:{AppInfiniteScroller:M},props:{loading:Boolean,hasData:Boolean,error:Boolean,mode:{type:String,default:"basic"},loadingMore:Boolean,noMore:Boolean,meta:{type:Object,default:()=>({})}},emits:["update:loading","clickError","loadMore","update:loadingMore"],setup(e,{emit:r,slots:a}){const o=b(()=>({...E,...e.meta}));function u(){return a.loading?a.loading():n(m,{class:"app-list__loading",type:"spinner"},{default:()=>[d(o).loadingText]})}function p(){return a.empty?a.empty():n(B,{class:"app-list__empty",image:d(o).emptyImage,description:d(o).emptyText},null)}function c(){return a.error?a.error():n("div",{class:"app-list__error",onClick:()=>{r("clickError")}},[d(o).errorText])}function f(){return a.bottom?a.bottom():n("div",{class:"app-list__bottom"},[e.loadingMore&&n(m,{size:"24px",color:"#999"},{default:()=>[d(o).loadingMoreText]}),e.noMore&&d(o).noMoreText,e.error&&c()])}return()=>{var i;if(!e.hasData&&e.error)return c();const t=(i=a.default)==null?void 0:i.call(a),l=e.mode==="infinite"?n(M,{class:"app-list",loading:e.loadingMore,noMore:e.noMore,"onUpdate:loading":_=>{r("update:loadingMore",_)},onLoadMore:()=>{r("loadMore")}},{default:()=>[t,f()]}):n("div",{class:"app-list"},[t]);return e.loading?u():e.hasData?l:p()}}});export{C as _};
