import{a as y,_ as C}from"./index.20240610204828.js";import{d as k,u as S,a as n,q as I,n as e,c as f,e as U,f as P,g as s,t as B,h as d,w as N,l as R,s as u,C as E,p as F,m as M,_ as T}from"./index.202406102048.js";import{i as q,a as A,b as D}from"./validate.202406102048.js";import"./is.202406102048.js";const L=r=>(F("data-v-bd3f8848"),r=r(),M(),r),W={class:"container"},j={class:"main"},z={class:"h2"},G={class:"form"},H={class:"form-item"},J=L(()=>s("div",{class:"form-item-country"},"中国 +86",-1)),K={class:"form-item"},O={class:"form-item"},Q={class:"form-item"},X=k({__name:"index",setup(r){const v=S(),b=n("重置密码"),l=n(""),i=n(""),t=n(""),c=n(""),m=n(!1),h=I(()=>e(l)&&e(i)&&e(t)&&e(c));function w(){if(!q(e(l))){u("手机号格式错误");return}if(!A(e(t))){u("请设置8-25位(数字+字母)密码");return}if(!D(e(t),e(c))){u("2次输入密码不一致");return}const p={mobile:e(l),code:e(i),pwd:e(t)};m.value=!0,E.userMResetPwd(p).then(()=>{m.value=!1,v.back(),u({type:"success",message:"重置成功"})}).catch(o=>{console.error(o),m.value=!1})}return(p,o)=>{const V=f("van-field"),g=y,_=C,x=f("van-button");return U(),P("div",W,[s("div",j,[s("div",z,B(b.value),1),s("form",G,[s("div",H,[J,d(V,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),class:"form-field",border:!1,type:"tel",placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),s("div",K,[d(g,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=a=>i.value=a),mobile:l.value,class:"form-field",border:!1,type:"number",maxlength:"4",placeholder:"请输入4位验证码",clearable:""},null,8,["modelValue","mobile"])]),s("div",O,[d(_,{key:"pwd",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value=a),class:"form-field",border:!1,placeholder:"请设置8-25位(数字+字母)新密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),s("div",Q,[d(_,{key:"pwd2",modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=a=>c.value=a),class:"form-field",border:!1,placeholder:"请再次输入新密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),d(x,{class:"form-submit",block:"",disabled:!h.value,loading:m.value,"loading-text":"重置中...",type:"primary",onClick:w},{default:N(()=>[R("确定")]),_:1},8,["disabled","loading"])])])])}}});const oe=T(X,[["__scopeId","data-v-bd3f8848"]]);export{oe as default};
