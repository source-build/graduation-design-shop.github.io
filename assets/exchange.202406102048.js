import{_ as C}from"./index.20240610204831.js";import{d as S,o as k,a as n,C as I,n as t,c as V,e as _,f as u,g as c,t as p,h as m,k as b,s as f,v as A,x as B,p as D,m as E,_ as N}from"./index.202406102048.js";import{A as h}from"./index.20240610204832.js";import{c as R}from"./format.202406102048.js";import{s as w}from"./deductionRule.202406102048.js";import"./is.202406102048.js";const P=s=>(D("data-v-5fe676fa"),s=s(),E(),s),T={class:"container"},M={class:"header"},U={class:"header-count"},z={class:"header-count-value"},L=P(()=>c("span",{class:"header-count-label"},"可用积分",-1)),O={key:0,class:"tips"},j=S({__name:"exchange",setup(s){k(()=>{i()});const d=n(2),a=n(""),l=n({}),r=n({});function i(){I.userAmount().then(e=>{l.value=e.data||{}}),h.scoreDeductionRules({type:t(d)}).then(e=>{var o;(o=e.data)!=null&&o.length&&(r.value=w(e.data[0]))})}function v(){if(t(d)===2&&!t(a)){f("请输入积分");return}const e={type:t(d),deductionScore:t(a)};A({forbidClick:!0,message:"加载中...",duration:0}),h.scoreExchangeCash(e).then(()=>{B(),f("兑换成功"),i()}).catch(o=>{console.error(o)})}return(e,o)=>{const g=V("van-field"),x=C;return _(),u("div",T,[c("div",M,[c("div",U,[c("span",z,p(t(R)(l.value.score,0)),1),L])]),m(g,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=y=>a.value=y),type:"digit",label:"兑换现金",placeholder:"你希望用多少积分来兑换余额"},null,8,["modelValue"]),r.value.desc?(_(),u("div",O,"规则："+p(r.value.desc),1)):b("",!0),m(x,{size:"medium",text:"立即兑换",onClickBtn:v})])}}});const Q=N(j,[["__scopeId","data-v-5fe676fa"]]);export{Q as default};
