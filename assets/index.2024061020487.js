import{a as B,_ as D}from"./index.20240610204828.js";import{d as I,B as q,u as $,E as j,a as n,q as E,n as t,c as f,e as F,f as L,g as e,t as M,h as d,w as P,l as w,s as m,p as R,m as T,_ as z}from"./index.202406102048.js";import{i as W,a as A,b as G}from"./validate.202406102048.js";import"./is.202406102048.js";function H(a){const{type:_}=a;return _==="mobile"?`用户${a.mobile.slice(-4)}`:`用户${String(new Date().getMonth()+1).padStart(2,"0")}-${String(new Date().getDate()).padStart(2,"0")}`}const p=a=>(R("data-v-40121694"),a=a(),T(),a),J={class:"container"},K={class:"main"},O={class:"h2"},Q={class:"form"},X={class:"form-item"},Y=p(()=>e("div",{class:"form-item-country"},"中国 +86",-1)),Z={class:"form-item"},ee={class:"form-item"},oe={class:"form-item"},te={class:"footer"},se={class:"footer-agreement"},ae=p(()=>e("span",null," 阅读并同意",-1)),le=p(()=>e("a",{href:"javascript:void(0);"},"《用户协议》",-1)),ne=p(()=>e("a",{href:"javascript:void(0);"},"《隐私政策》",-1)),re=I({__name:"index",setup(a){const _=q(),v=$(),b=j(),y=n("免费注册"),l=n(""),i=n(""),r=n(""),c=n(""),h=n(!0),u=n(!1),x=E(()=>t(l)&&t(i)&&t(r)&&t(c));function S(){if(!W(t(l))){m("手机号格式错误");return}if(!A(t(r))){m("请设置8-25位(数字+字母)密码");return}if(!G(t(r),t(c))){m("2次输入密码不一致");return}const g={mobile:t(l),code:t(i),nick:H({type:"mobile",mobile:t(l)}),pwd:t(r),autoLogin:!0};u.value=!0,_.login({provider:"register",params:g}).then(()=>{u.value=!1,b.query.redirect?v.replace({path:b.query.redirect}):v.replace({path:"/"}),m({type:"success",message:"注册成功"})}).catch(o=>{console.error(o),u.value=!1})}return(g,o)=>{const k=f("van-field"),C=B,V=D,U=f("van-button"),N=f("van-checkbox");return F(),L("div",J,[e("div",K,[e("div",O,M(y.value),1),e("form",Q,[e("div",X,[Y,d(k,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=s=>l.value=s),class:"form-field",border:!1,type:"tel",placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),e("div",Z,[d(C,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value=s),mobile:l.value,class:"form-field",border:!1,type:"number",maxlength:"4",placeholder:"请输入4位验证码",clearable:""},null,8,["modelValue","mobile"])]),e("div",ee,[d(V,{key:"pwd",modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=s=>r.value=s),class:"form-field",border:!1,placeholder:"请设置8-25位(数字+字母)密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),e("div",oe,[d(V,{key:"pwd2",modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=s=>c.value=s),class:"form-field",border:!1,placeholder:"请再次输入密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),d(U,{class:"form-submit",block:"",disabled:!x.value,loading:u.value,"loading-text":"注册中...",type:"primary",onClick:S},{default:P(()=>[w("确定")]),_:1},8,["disabled","loading"])])]),e("div",te,[e("div",se,[d(N,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=s=>h.value=s),"icon-size":"16px"},null,8,["modelValue"]),ae,le,w("和"),ne])])])}}});const me=z(re,[["__scopeId","data-v-40121694"]]);export{me as default};
